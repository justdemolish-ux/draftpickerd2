<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Style 4: Clean Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #1c1c1c;
            color: #fff; 
            font-family: -apple-system, system-ui, sans-serif; 
            padding: 8px; 
            min-height: 100vh;
        }
        .container { max-width: 400px; margin: 0 auto; }
        
        .row { display: flex; gap: 6px; margin-bottom: 6px; }
        .col { flex: 1; }
        
        input {
            width: 100%;
            background: #2a2a2a;
            border: none;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 15px;
            text-align: center;
        }
        input::placeholder { color: #666; }
        .coef { color: #f5a623; font-weight: 600; }
        
        .label { font-size: 10px; color: #666; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px; }
        
        .slots { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-bottom: 6px; }
        .slot {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 10px 2px;
            text-align: center;
            cursor: pointer;
            min-height: 48px;
        }
        .slot.active { background: #3a3a3a; box-shadow: 0 0 0 2px #f5a623; }
        .slot.filled { background: #333; }
        .slot .num { font-size: 10px; color: #555; }
        .slot .name { font-size: 8px; color: #aaa; margin-top: 2px; }
        .slot .wr { font-size: 12px; font-weight: 600; margin-top: 2px; }
        .slot .wr.g { color: #4cd964; }
        .slot .wr.r { color: #ff3b30; }
        .slot .wr.n { color: #888; }
        
        .search {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 6px;
        }
        .search input { background: #1c1c1c; margin-bottom: 6px; }
        .heroes { display: grid; grid-template-columns: repeat(5, 1fr); gap: 3px; max-height: 120px; overflow-y: auto; }
        .hero-btn {
            background: #1c1c1c;
            border: none;
            border-radius: 4px;
            padding: 6px 2px;
            color: #888;
            font-size: 8px;
            cursor: pointer;
        }
        .hero-btn:active { background: #3a3a3a; }
        .hero-btn.picked { opacity: 0.15; }
        
        .output {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            display: none;
        }
        .output.visible { display: block; }
        
        .compare { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .team-stat { text-align: center; flex: 1; }
        .team-stat .val { font-size: 28px; font-weight: 300; }
        .team-stat .val.g { color: #4cd964; }
        .team-stat .val.r { color: #ff3b30; }
        .team-stat .lbl { font-size: 11px; color: #888; }
        .vs { color: #444; font-size: 12px; }
        
        .result-box { padding: 12px; border-radius: 8px; }
        .result-box.bet { background: #1a3320; }
        .result-box.skip { background: #333; }
        .result-title { font-size: 18px; font-weight: 500; }
        .result-box.bet .result-title { color: #4cd964; }
        .result-box.skip .result-title { color: #888; }
        .result-sub { font-size: 12px; color: #888; margin-top: 4px; }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 16px;
            padding: 8px;
            font-size: 10px;
            color: #666;
        }
        .stats-bar span { color: #4cd964; }
    </style>
</head>
<body>
    <div class="container">
        <div class="stats-bar">
            База: 20K | WR: <span>58%</span> | ROI: <span>+17%</span>
        </div>
        
        <div class="row">
            <div class="col">
                <div class="label">Team 1</div>
                <input type="text" id="t1n" placeholder="Name">
            </div>
            <div class="col" style="max-width:80px">
                <div class="label">Coef</div>
                <input type="text" class="coef" id="t1c" placeholder="1.50">
            </div>
        </div>
        <div class="slots" id="s1"></div>
        
        <div class="row">
            <div class="col">
                <div class="label">Team 2</div>
                <input type="text" id="t2n" placeholder="Name">
            </div>
            <div class="col" style="max-width:80px">
                <div class="label">Coef</div>
                <input type="text" class="coef" id="t2c" placeholder="2.50">
            </div>
        </div>
        <div class="slots" id="s2"></div>
        
        <div class="search">
            <input type="text" id="search" placeholder="Search hero">
            <div class="heroes" id="heroes"></div>
        </div>
        
        <div class="output" id="output">
            <div class="compare">
                <div class="team-stat">
                    <div class="val" id="v1">50.0</div>
                    <div class="lbl" id="l1">Team 1</div>
                </div>
                <div class="vs">vs</div>
                <div class="team-stat">
                    <div class="val" id="v2">50.0</div>
                    <div class="lbl" id="l2">Team 2</div>
                </div>
            </div>
            <div class="result-box" id="res">
                <div class="result-title" id="resT">—</div>
                <div class="result-sub" id="resS"></div>
            </div>
        </div>
    </div>
    
    <script>
        const heroWR={"Abaddon":53.2,"Alchemist":46.1,"Ancient Apparition":48.3,"Anti-Mage":42.9,"Arc Warden":51,"Axe":50,"Bane":52.3,"Batrider":45.1,"Beastmaster":53.6,"Bloodseeker":53.7,"Bounty Hunter":55.6,"Brewmaster":49.9,"Bristleback":40.2,"Broodmother":66.3,"Centaur Warrunner":44.8,"Chaos Knight":57.1,"Chen":54.2,"Clinkz":57.4,"Clockwerk":54.3,"Crystal Maiden":48.2,"Dark Seer":49,"Dark Willow":50.6,"Dawnbreaker":48.1,"Dazzle":60.3,"Death Prophet":54.4,"Disruptor":50.7,"Doom":38.6,"Dragon Knight":49,"Drow Ranger":54.2,"Earth Spirit":45.6,"Earthshaker":45.5,"Elder Titan":55.5,"Ember Spirit":54.8,"Enchantress":52.8,"Enigma":53.3,"Faceless Void":39,"Grimstroke":43.3,"Gyrocopter":51.7,"Hoodwink":49.1,"Huskar":57.5,"Invoker":46.6,"Io":62.3,"Jakiro":49.3,"Juggernaut":52.6,"Keeper of the Light":52.9,"Kez":50,"Kunkka":53.6,"Legion Commander":58.7,"Leshrac":47.5,"Lich":50.1,"Lifestealer":49,"Lina":49.2,"Lion":45.1,"Lone Druid":40.5,"Luna":56.5,"Lycan":57.8,"Magnus":53.8,"Marci":58.7,"Mars":45.8,"Medusa":40.4,"Meepo":55,"Mirana":44.4,"Monkey King":43.4,"Morphling":42.9,"Muerta":43.8,"Naga Siren":41.6,"Nature's Prophet":47.8,"Necrophos":54.8,"Night Stalker":47.5,"Nyx Assassin":50.6,"Ogre Magi":52.8,"Omniknight":58.1,"Oracle":54.3,"Outworld Destroyer":44.2,"Pangolier":39.5,"Phantom Assassin":35.1,"Phantom Lancer":47.5,"Phoenix":57.2,"Primal Beast":43.1,"Puck":49.1,"Pudge":53.1,"Pugna":56.7,"Queen of Pain":48.9,"Razor":55.2,"Riki":44.7,"Ringmaster":43.9,"Rubick":52.1,"Sand King":43.5,"Shadow Demon":47.7,"Shadow Fiend":51.2,"Shadow Shaman":52.5,"Silencer":42.8,"Skywrath Mage":54.5,"Slardar":48.6,"Slark":43.7,"Snapfire":50.1,"Sniper":53,"Spectre":39.1,"Spirit Breaker":52.3,"Storm Spirit":42.6,"Sven":43.2,"Techies":44.1,"Templar Assassin":54.5,"Terrorblade":43.2,"Tidehunter":48.5,"Timbersaw":47.7,"Tinker":47,"Tiny":50.3,"Treant Protector":54.4,"Troll Warlord":47,"Tusk":51.5,"Underlord":47.2,"Undying":57.7,"Ursa":50.9,"Vengeful Spirit":50.2,"Venomancer":57.7,"Viper":53.5,"Visage":63.2,"Void Spirit":50,"Warlock":52.6,"Weaver":51.7,"Windranger":48.3,"Winter Wyvern":57.6,"Witch Doctor":50.4,"Wraith King":46.8,"Zeus":47.1};
        const heroes=Object.keys(heroWR).sort();
        let picked={},active=null;
        
        const wrC=w=>w>=54?'g':w<=46?'r':'n';
        const avgC=a=>a>=52?'g':a<=48?'r':'';
        const avg=t=>t.length?t.reduce((s,h)=>s+(heroWR[h]||50),0)/t.length:50;
        
        function init(){
            [1,2].forEach(t=>{
                const c=document.getElementById('s'+t);
                for(let i=1;i<=5;i++){
                    const s=document.createElement('div');
                    s.className='slot';
                    s.dataset.t=t;s.dataset.p=i;
                    s.innerHTML=`<div class="num">${i}</div>`;
                    s.onclick=()=>click(s);
                    c.appendChild(s);
                }
            });
            const g=document.getElementById('heroes');
            heroes.forEach(h=>{
                const b=document.createElement('button');
                b.className='hero-btn';
                b.textContent=h.length>9?h.slice(0,8)+'…':h;
                b.dataset.h=h;
                b.onclick=()=>pick(h);
                g.appendChild(b);
            });
            document.querySelector('.slot').classList.add('active');
            active=document.querySelector('.slot');
        }
        
        function click(s){
            if(s.classList.contains('filled')){
                const h=s.dataset.h;
                delete picked[s.dataset.t+'-'+s.dataset.p];
                s.classList.remove('filled');
                s.innerHTML=`<div class="num">${s.dataset.p}</div>`;
                document.querySelector(`[data-h="${h}"]`)?.classList.remove('picked');
                analyze();
            }else{
                document.querySelectorAll('.slot').forEach(x=>x.classList.remove('active'));
                s.classList.add('active');
                active=s;
            }
        }
        
        function pick(h){
            if(!active||active.classList.contains('filled')){
                active=document.querySelector('.slot:not(.filled)');
                if(!active)return;
            }
            picked[active.dataset.t+'-'+active.dataset.p]=h;
            active.classList.add('filled');
            active.dataset.h=h;
            const w=heroWR[h];
            active.innerHTML=`<div class="num">${active.dataset.p}</div><div class="name">${h.length>7?h.slice(0,6)+'…':h}</div><div class="wr ${wrC(w)}">${w.toFixed(0)}</div>`;
            document.querySelector(`[data-h="${h}"]`)?.classList.add('picked');
            active.classList.remove('active');
            active=document.querySelector('.slot:not(.filled)');
            if(active)active.classList.add('active');
            analyze();
        }
        
        function analyze(){
            const t1=[],t2=[];
            for(let i=1;i<=5;i++){
                if(picked['1-'+i])t1.push(picked['1-'+i]);
                if(picked['2-'+i])t2.push(picked['2-'+i]);
            }
            if(t1.length<3||t2.length<3){document.getElementById('output').classList.remove('visible');return;}
            
            const n1=document.getElementById('t1n').value||'Team 1';
            const n2=document.getElementById('t2n').value||'Team 2';
            const o1=parseFloat(document.getElementById('t1c').value)||1.9;
            const o2=parseFloat(document.getElementById('t2c').value)||1.9;
            const a1=avg(t1),a2=avg(t2),d=Math.abs(a1-a2);
            
            document.getElementById('v1').textContent=a1.toFixed(1);
            document.getElementById('v1').className='val '+avgC(a1);
            document.getElementById('v2').textContent=a2.toFixed(1);
            document.getElementById('v2').className='val '+avgC(a2);
            document.getElementById('l1').textContent=n1;
            document.getElementById('l2').textContent=n2;
            
            const res=document.getElementById('res');
            const bet=d>=1&&d<5;
            const pk=a1>a2?1:2;
            const pn=pk===1?n1:n2;
            const po=pk===1?o1:o2;
            
            if(bet){
                res.className='result-box bet';
                document.getElementById('resT').textContent=`${pn} @ ${po.toFixed(2)}`;
                document.getElementById('resS').textContent=`diff ${d.toFixed(1)}% → 1 flat`;
            }else{
                res.className='result-box skip';
                document.getElementById('resT').textContent='SKIP';
                document.getElementById('resS').textContent=`diff ${d.toFixed(1)}%`;
            }
            document.getElementById('output').classList.add('visible');
        }
        
        document.getElementById('search').oninput=e=>{
            const s=e.target.value.toLowerCase();
            document.querySelectorAll('.hero-btn').forEach(b=>b.style.display=b.dataset.h.toLowerCase().includes(s)?'':'none');
        };
        document.getElementById('search').onkeydown=e=>{
            if(e.key==='Enter'){
                const v=Array.from(document.querySelectorAll('.hero-btn')).find(b=>b.style.display!=='none'&&!b.classList.contains('picked'));
                if(v){pick(v.dataset.h);e.target.value='';document.querySelectorAll('.hero-btn').forEach(b=>b.style.display='');}
            }
        };
        ['t1n','t2n','t1c','t2c'].forEach(id=>document.getElementById(id).oninput=analyze);
        init();
    </script>
</body>
</html>
